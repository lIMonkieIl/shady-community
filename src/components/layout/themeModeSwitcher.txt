"use client";

import { type TThemeMode, ThemeModes } from "@/lib/constants/theme/Themes";
import { uiState$ } from "@/lib/state/uiState";
import { use$ } from "@legendapp/state/react";
import { Moon as IconMoon } from "lucide-react";
import { Sun as IconSun } from "lucide-react";
import { Monitor as IconMonitor } from "lucide-react";
import { useEffect } from "react";

export default function ThemeModeSwitcher() {


	const getNextMode = (currentMode: TThemeMode): TThemeMode => {
		const modes = Object.values(ThemeModes);
		const currentIndex = modes.indexOf(currentMode);
		return modes[(currentIndex + 1) % modes.length];
	};

	const getModeIcon = (mode: TThemeMode) => {
		switch (mode) {
			case "dark":
				return <IconMoon className=" size-4" />;
			case "light":
				return <IconSun className=" size-4" />;
			case "system":
				return <IconMonitor className=" size-4" />;
		}
	};

	return (
		<button
			type="button"
			title="Switch Theme Mode"
			className="btn preset-tonal gap-1"
			onClick={() => onModeSelection(getNextMode(curMode))}
		>
			<span className="hidden xl:inline text-sm capitalize">Mode:</span>
			{getModeIcon(curMode)}
		</button>
	);
}
